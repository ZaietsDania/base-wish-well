git init<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base Wish Well dApp</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; padding: 50px 20px; background-color: #f0f2f5; color: #1c1e21; }
        .container { background: white; padding: 40px; border-radius: 20px; display: inline-block; box-shadow: 0 10px 30px rgba(0,0,0,0.05); max-width: 500px; width: 100%; }
        button { background-color: #0052ff; color: white; border: none; padding: 12px 24px; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 600; transition: 0.3s; }
        button:hover { background-color: #0040c7; transform: translateY(-2px); }
        input { padding: 12px; width: 80%; border: 2px solid #e1e4e8; border-radius: 12px; margin-bottom: 10px; font-size: 16px; }
        #wishesList { margin-top: 30px; text-align: left; }
        .wish-card { background: #f8f9fa; padding: 15px; border-radius: 12px; margin-bottom: 10px; border-left: 5px solid #0052ff; font-size: 14px; }
        .wish-card small { color: #65676b; display: block; margin-bottom: 5px; }
        #status { margin-top: 20px; font-size: 14px; color: #0052ff; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>üè∫ –ö—Ä–∏–Ω–∏—Ü—è –±–∞–∂–∞–Ω—å Base</h1>
    <p>–ú–µ—Ä–µ–∂–∞: <b>Base Sepolia</b></p>

    <button id="connectBtn">üîå –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å</button>

    <div id="wishSection" style="display:none;">
        <p>–£—Å—å–æ–≥–æ –±–∞–∂–∞–Ω—å —É –∫—Ä–∏–Ω–∏—Ü—ñ: <b id="count">0</b></p>
        <input type="text" id="wishInput" placeholder="–¢–≤–æ—î –±–∞–∂–∞–Ω–Ω—è –¥–ª—è –±–ª–æ–∫—á–µ–π–Ω—É...">
        <br>
        <button id="sendBtn">‚ú® –ö–∏–Ω—É—Ç–∏ –≤ –∫—Ä–∏–Ω–∏—Ü—é</button>

        <div id="wishesList">
            <h3>üìú –û—Å—Ç–∞–Ω–Ω—ñ –±–∞–∂–∞–Ω–Ω—è:</h3>
            <div id="listContent">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
        </div>
    </div>

    <div id="status"></div>
</div>

<script>
    const contractAddress = "0xFEA7b4375a445A8def5bfafe4934D6c10cAC7b6B";
    const abi = [
        "function castWish(string _message) external",
        "function getCount() public view returns (uint256)",
        "function allWishes(uint256) public view returns (address user, string message, uint256 time)"
    ];

    let provider, signer, contract;

    async function init() {
        if (window.ethereum) {
            provider = new ethers.BrowserProvider(window.ethereum);
            document.getElementById("connectBtn").onclick = connect;
        } else {
            alert("–í—Å—Ç–∞–Ω–æ–≤–∏ MetaMask!");
        }
    }

    async function connect() {
        try {
            await provider.send("eth_requestAccounts", []);
            signer = await provider.getSigner();
            contract = new ethers.Contract(contractAddress, abi, signer);

            document.getElementById("connectBtn").style.display = "none";
            document.getElementById("wishSection").style.display = "block";
            updateUI();
        } catch (err) { console.error(err); }
    }

    async function updateUI() {
        const count = await contract.getCount();
        document.getElementById("count").innerText = count.toString();

        let listHtml = "";
        // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –æ—Å—Ç–∞–Ω–Ω—ñ 5 –±–∞–∂–∞–Ω—å (–∞–±–æ –≤—Å—ñ, —è–∫—â–æ —ó—Ö –º–µ–Ω—à–µ)
        const total = Number(count);
        for (let i = total - 1; i >= 0 && i >= total - 5; i--) {
            const wish = await contract.allWishes(i);
            listHtml += `
                <div class="wish-card">
                    <small>–í—ñ–¥: ${wish.user.substring(0,6)}...${wish.user.substring(38)}</small>
                    <b>${wish.message}</b>
                </div>
            `;
        }
        document.getElementById("listContent").innerHTML = listHtml || "–ö—Ä–∏–Ω–∏—Ü—è –ø–æ–∫–∏ –ø–æ—Ä–æ–∂–Ω—è";
    }

    async function sendWish() {
        const msg = document.getElementById("wishInput").value;
        if (!msg) return;
        try {
            const tx = await contract.castWish(msg);
            document.getElementById("status").innerText = "‚è≥ –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –≤ –±–ª–æ–∫—á–µ–π–Ω—ñ...";
            await tx.wait();
            document.getElementById("status").innerText = "‚úÖ –ë–∞–∂–∞–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ!";
            document.getElementById("wishInput").value = "";
            updateUI();
        } catch (err) { document.getElementById("status").innerText = "‚ùå –ü–æ–º–∏–ª–∫–∞"; }
    }

    document.getElementById("sendBtn").onclick = sendWish;
    init();
</script>
</body>
</html>